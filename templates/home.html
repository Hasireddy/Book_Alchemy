{% extends "base.html" %}
{% block content %}

<div class="top-buttons">
  <a href="{{ url_for('add_author') }}"><button type="button">Add New Author</button></a>
  <a href="{{ url_for('add_book') }}"><button type="button">Add New Book</button></a>
</div>
<hr/>

<div class="top-bar">
    <!-- Search -->
    <form method="GET" action="{{ url_for('home') }}" class="search-form">
        <input type="text" name="q" placeholder="Search by title..." value="{{ search_term|default('') }}">
        <button type="submit">Search</button>
    </form>

    <!-- Sort -->
    <form method="GET" action="{{ url_for('home') }}" class="sort-form">
        <label for="sort">Sort by:</label>
        <select name="sort" id="sort" onchange="this.form.submit()">
            <option value="">Default</option>
            <option value="title" {% if sort_by=='title' %}selected{% endif %}>Title</option>
            <option value="author" {% if sort_by=='author' %}selected{% endif %}>Author</option>
            <option value="publication_year" {% if sort_by=='publication_year' %}selected{% endif %}>Year</option>
        </select>
    </form>
</div>

<div class="books-grid">
{% for book in books %}
<div class="book-card">
    <div class="book-info">
        <h3>{{ book.title }}</h3>
        <p>ISBN: {{ book.isbn }}</p>
        <p>
            <span class="badge badge-author">{{ book.author.name }}</span>
            <span class="badge badge-year">{{ book.publication_year }}</span>
        </p>
    </div>
    <div class="actions">
        <form action="{{ url_for('delete_book', book_id=book.id) }}" method="POST">
            <button onclick="return confirm('Are you sure you want to delete this book?');">Delete</button>
        </form>
    </div>
</div>
{% else %}
<p>No books found.</p>
{% endfor %}
</div>

{% endblock %}